@model Chamedoon.Application.Services.Account.Users.ViewModel.UserDetails_VM
@using Chamedoon.Application.Common.Extensions
@using Chamedoon.Application.Services.Subscription
@{
    Layout = "~/Views/Shared/UserPanelLayout.cshtml";
    ViewData["Title"] = "ูพูู ฺฉุงุฑุจุฑ " + User.Identity?.Name;
    var subscriptionStatus = ViewBag.SubscriptionStatus as SubscriptionStatus;
}

@section UserPanelContent {
    <div class="glass-card dashboard-card">
        <h5>ุฎูุงุตู ุญุณุงุจ ฺฉุงุฑุจุฑ</h5>
        <p class="glass-helper">ุงุทูุงุนุงุช ุดุฎุต ู ูุถุนุช ุญุณุงุจ ุชู ุฏุฑ ุงู ุจุฎุด ููุงุด ุฏุงุฏู ูโุดูุฏ.</p>
        <div class="profile-details">
            <div class="detail-row">
                <span class="detail-icon" aria-hidden="true">๐</span>
                <div class="detail-body">
                    <p class="detail-title">ูุงู ฺฉุงุฑุจุฑ</p>
                    <p class="detail-value">@Model.UserName</p>
                </div>
            </div>
            <div class="detail-row">
                <span class="detail-icon" aria-hidden="true">๐ง</span>
                <div class="detail-body">
                    <p class="detail-title">ุงูู</p>
                    <p class="detail-value">@Model.Email</p>
                </div>
            </div>
            <div class="detail-row">
                <span class="detail-icon" aria-hidden="true">๐</span>
                <div class="detail-body">
                    <p class="detail-title">ุชุงุฑุฎ ุนุถูุช</p>
                    @{
                        var joinDate = Model.Created.ConvertMiladiToShamsi();
                    }
                    @if (string.IsNullOrWhiteSpace(joinDate))
                    {
                        <p class="detail-value text-muted">ุงุทูุงุนุงุช ุชุงุฑุฎ ุซุจุชโูุงู ููุฌูุฏ ูุณุช</p>
                    }
                    else
                    {
                        <p class="detail-value">@joinDate</p>
                    }
                </div>
            </div>
            <div class="detail-row">
                <span class="detail-icon" aria-hidden="true">โ๏ธ</span>
                <div class="detail-body">
                    <p class="detail-title">ูุถุนุช ุญุณุงุจ</p>
                    <p class="detail-value">@(Model.IsBlocked == true ? "ูุนุงู" : "ุบุฑูุนุงู")</p>
                </div>
            </div>
            <div class="detail-row">
                <span class="detail-icon" aria-hidden="true">๐</span>
                <div class="detail-body">
                    <p class="detail-title">ูุถุนุช ุงุดุชุฑุงฺฉ</p>
                    @if (subscriptionStatus is null)
                    {
                        <p class="detail-value mb-0">ุงุดุชุฑุงฺฉ ูุนุงู ูุดุฏู ุงุณุช.</p>
                        <small class="text-muted">ุงุฒ <a asp-controller="Subscription" asp-action="Index">ุตูุญู ุงุดุชุฑุงฺฉโูุง</a> ูโุชูุงู ุดุฑูุน ฺฉู.</small>
                    }
                    else
                    {
                        <p class="detail-value mb-0">@subscriptionStatus.PlanTitle</p>
                        <small class="text-muted d-block">@subscriptionStatus.RemainingDays ุฑูุฒ ุจุงู ูุงูุฏู</small>
                        @if (subscriptionStatus.EvaluationLimit is null)
                        {
                            <small class="text-muted">ุงุณุชุนูุงู ูุงูุญุฏูุฏ ูุนุงู ุงุณุช.</small>
                        }
                        else
                        {
                            <small class="text-muted">@subscriptionStatus.UsedEvaluations ุงุฒ @subscriptionStatus.EvaluationLimit ุงุณุชุนูุงู ุงุณุชูุงุฏู ุดุฏู</small>
                        }
                    }
                </div>
            </div>
        </div>
    </div>
}

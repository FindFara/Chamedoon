@model Chamedoon.Application.Services.Immigration.ImmigrationInput
@using Microsoft.AspNetCore.Mvc.Rendering
@using Chamedoon.Application.Services.Immigration
@{
    ViewData["Title"] = "محاسبه امتیاز مهاجرت";
    Layout = "~/Views/Shared/Layout.cshtml";
}

<section class="section overflow-hidden">
<div class="container mt-100 mt-60">
    <div class="row align-items-center">
        <div class="col-lg-6 col-md-6 col-12 order-2 order-md-1 mt-4 mt-sm-0 pt-2 pt-sm-0">
                <img src="~/images/app.svg" alt="">
            </div>

        <div class="col-lg-6 col-md-6 col-12 order-1 order-md-2">
            <div class="section-title">
                <h4 class="title mb-4">سئوی سایت شما<br> با کمک لندریک بالاست</h4>
                <p class="text-muted">به دلیل استفاده گسترده از آن به عنوان متن پر کننده برای طرح بندی, غیرقابل خواندن از اهمیت زیادی برخوردار است: ادراک انسان برای شناسایی الگوها و تکرارهای خاص در متن تنظیم شده است. اگر توزیع حروف تأثیر بصری داشته باشد.</p>
                    <a data-bs-toggle="modal" data-bs-target="#modalStep1" class="btn btn-primary">شروع ارزیابی<i data-feather="arrow-left" class="fea icon-sm"></i></a>
            </div>
        </div>
    </div>
</div>
</section>

<form id="immigrationForm" asp-action="Calculate" method="post">
    @Html.AntiForgeryToken()

    <!-- Modal Step 1: اطلاعات پایه -->
    <div class="modal fade" id="modalStep1" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">مرحله ۱ - اطلاعات پایه</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="بستن"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label for="Age" class="form-label d-flex align-items-center justify-content-between field-label">
                            <span class="field-label-text">سن:</span>
                            <i data-feather="calendar" class="field-hint-icon" data-bs-toggle="tooltip" title="سن مناسب می‌تواند امتیاز بیشتری برای مهاجرت فراهم کند. کشورهای مقصد معمولاً برای سنین جوان‌تر امتیاز بالاتری در نظر می‌گیرند زیرا فرصت بیشتری برای تحصیل و کار وجود دارد."></i>
                        </label>
                        <input asp-for="Age" class="form-control" type="number" min="0" />
                    </div>
                    <div class="mb-3">
                        <label for="JobCategory" class="form-label d-flex align-items-center justify-content-between field-label">
                            <span class="field-label-text">دسته شغلی:</span>
                            <i data-feather="briefcase" class="field-hint-icon" data-bs-toggle="tooltip" title="انتخاب دسته شغلی تخصصی تأثیر زیادی در امتیازدهی دارد. اگر شغل شما در فهرست نیازهای فوری کشور مقصد باشد، امتیاز بیشتری دریافت می‌کنید چون کمبود نیروی متخصص جبران می‌شود."></i>
                        </label>
                        <select asp-for="JobCategory" class="form-control" asp-items="Html.GetEnumSelectList<Chamedoon.Application.Services.Immigration.JobCategoryType>()"></select>
                    </div>
                    <div class="mb-3">
                        <label for="JobTitle" class="form-label d-flex align-items-center justify-content-between field-label">
                            <span class="field-label-text">عنوان شغل (اختیاری):</span>
                            <i data-feather="tag" class="field-hint-icon" data-bs-toggle="tooltip" title="عنوان دقیق شغل کمک می‌کند تا امتیاز با شرایط واقعی شما تطبیق داده شود. ذکر دقیق عنوان شغلی باعث می‌شود امتیازات مرتبط با مهارت‌های ویژه یا مدارک حرفه‌ای دقیق‌تر محاسبه شود."></i>
                        </label>
                        <input asp-for="JobTitle" class="form-control" type="text" />
                    </div>
                    <div class="mb-3">
                        <label for="WorkExperienceYears" class="form-label d-flex align-items-center justify-content-between field-label">
                            <span class="field-label-text">سابقه کاری (سال):</span>
                            <i data-feather="trending-up" class="field-hint-icon" data-bs-toggle="tooltip" title="سابقه کاری بیشتر معمولاً امتیاز بیشتری به همراه دارد. هر سال تجربه مرتبط، آمادگی شما برای بازار کار کشور مقصد را نشان می‌دهد و سقف امتیازات حرفه‌ای را افزایش می‌دهد."></i>
                        </label>
                        <input asp-for="WorkExperienceYears" class="form-control" type="number" min="0" />
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" onclick="showNextModal('modalStep1','modalStep2')">بعدی</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Step 2: تحصیلات و زبان -->
    <div class="modal fade" id="modalStep2" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">مرحله ۲ - تحصیلات و زبان</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="بستن"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label for="FieldCategory" class="form-label d-flex align-items-center justify-content-between field-label">
                            <span class="field-label-text">دسته رشته یا شغل:</span>
                            <i data-feather="layers" class="field-hint-icon" data-bs-toggle="tooltip" title="رشته‌های اولویت‌دار امتیاز بیشتری به دست می‌آورند. کسب‌وکارها برای رشته‌های تخصصی و کمیاب امتیاز ویژه قائل‌اند تا کمبود نیروهای کلیدی سریع‌تر تأمین شود."></i>
                        </label>
                        <select asp-for="FieldCategory" class="form-control" asp-items="Html.GetEnumSelectList<Chamedoon.Application.Services.Immigration.FieldCategoryType>()"></select>
                    </div>
                    <div class="mb-3">
                        <label for="DegreeLevel" class="form-label d-flex align-items-center justify-content-between field-label">
                            <span class="field-label-text">مقطع تحصیلی:</span>
                            <i data-feather="award" class="field-hint-icon" data-bs-toggle="tooltip" title="مدرک تحصیلی بالاتر امتیاز بیشتری ایجاد می‌کند. داشتن مدرک دانشگاهی معتبر نشان‌دهنده مهارت‌های علمی و پژوهشی است و در سیستم‌های امتیازدهی به‌عنوان مزیت رقابتی ثبت می‌شود."></i>
                        </label>
                        <select asp-for="DegreeLevel" class="form-control" asp-items="Html.GetEnumSelectList<Chamedoon.Application.Services.Immigration.DegreeLevelType>()"></select>
                    </div>
                    <div class="mb-3">
                        <label for="LanguageCertificate" class="form-label d-flex align-items-center justify-content-between field-label">
                            <span class="field-label-text">مدرک زبان:</span>
                            <i data-feather="globe" class="field-hint-icon" data-bs-toggle="tooltip" title="مدرک زبان قوی یکی از معیارهای اصلی امتیازدهی است. ارائه نمرات معتبر زبان ثابت می‌کند که می‌توانید در محیط‌های کاری و تحصیلی ارتباط مؤثر برقرار کنید و از امتیازهای اصلی محروم نمی‌شوید."></i>
                        </label>
                        <select asp-for="LanguageCertificate" class="form-control" asp-items="Html.GetEnumSelectList<Chamedoon.Application.Services.Immigration.LanguageCertificateType>()"></select>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="showPreviousModal('modalStep2','modalStep1')">قبلی</button>
                    <button type="button" class="btn btn-primary" onclick="showNextModal('modalStep2','modalStep3')">بعدی</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="modalStep3" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">مرحله ۳ - نوع ویزا و وضعیت فردی</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="بستن"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label for="InvestmentAmount" class="form-label d-flex align-items-center justify-content-between field-label">
                            <span class="field-label-text">میزان سرمایه (دلار/یورو):</span>
                            <i data-feather="dollar-sign" class="field-hint-icon" data-bs-toggle="tooltip" title="سرمایه بیشتر مسیرهای سرمایه‌گذاری و امتیاز را افزایش می‌دهد. هرچه سرمایه‌گذاری شما بیشتر باشد، دولت مقصد با اطمینان بیشتری ویزا صادر می‌کند و در نتیجه امتیاز برنامه‌های سرمایه‌گذاری افزایش می‌یابد."></i>
                        </label>
                        <input asp-for="InvestmentAmount" class="form-control" type="number" min="0" step="1000" />
                    </div>
                    <div class="mb-3">
                        <label for="MaritalStatus" class="form-label d-flex align-items-center justify-content-between field-label">
                            <span class="field-label-text">وضعیت تاهل:</span>
                            <i data-feather="heart" class="field-hint-icon" data-bs-toggle="tooltip" title="وضعیت تأهل می‌تواند امتیاز خانوادگی و امتیاز نهایی را تغییر دهد. داشتن همسر یا همراه واجد شرایط می‌تواند امتیاز مهارت‌های مکمل، زبان و سرمایه اضافی را به پرونده شما اضافه کند."></i>
                        </label>
                        <select asp-for="MaritalStatus" class="form-control" asp-items="Html.GetEnumSelectList<Chamedoon.Application.Services.Immigration.MaritalStatusType>()"></select>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="showPreviousModal('modalStep3','modalStep2')">قبلی</button>
                    <button type="button" class="btn btn-primary" onclick="showNextModal('modalStep3','modalStep4')">بعدی</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Step 4: سایر اطلاعات -->
    <div class="modal fade" id="modalStep4" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">مرحله ۴ - سایر اطلاعات</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="بستن"></button>
                </div>
                <div class="modal-body">
                    <div class="form-check mb-3">
                        <input asp-for="WillingToStudy" class="form-check-input" type="checkbox" />
                        <label class="form-check-label d-flex align-items-center justify-content-between field-label" for="WillingToStudy">
                            <span class="field-label-text">آیا تمایل به ادامه تحصیل دارید؟</span>
                            <i data-feather="book-open" class="field-hint-icon" data-bs-toggle="tooltip" title="تمایل به تحصیل می‌تواند مسیرهای امتیازآور تحصیلی را فعال کند. اعلام آمادگی برای تحصیل مجدد نشان می‌دهد که می‌توانید از برنامه‌های تحصیلی و بورسیه استفاده کنید و امتیاز مسیرهای آموزشی را بالا ببرید."></i>
                        </label>
                    </div>
                    <div class="mb-3">
                        <label for="MBTIPersonality" class="form-label d-flex align-items-center justify-content-between field-label">
                            <span class="field-label-text">شخصیت MBTI:</span>
                            <i data-feather="users" class="field-hint-icon" data-bs-toggle="tooltip" title="شناخت تیپ شخصیتی به پیشنهاد مسیرهای متناسب و افزایش شانس موفقیت کمک می‌کند. تحلیل تیپ شخصیتی کمک می‌کند مسیرهای مهاجرتی متناسب با سبک کاری و تعاملات اجتماعی شما انتخاب شود و شانس موفقیت در اخذ ویزا بالا رود."></i>
                        </label>
                        <select asp-for="MBTIPersonality" class="form-control" asp-items="Html.GetEnumSelectList<Chamedoon.Application.Services.Immigration.PersonalityType>()"></select>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="showPreviousModal('modalStep4','modalStep3')">قبلی</button>
                    <button type="submit" class="btn btn-success">محاسبه امتیاز</button>
                </div>
            </div>
        </div>
    </div>

</form>

<script>
    function showNextModal(currentId, nextId) {
        var currentModal = bootstrap.Modal.getInstance(document.getElementById(currentId));
        currentModal.hide();
        var nextModal = new bootstrap.Modal(document.getElementById(nextId));
        nextModal.show();
    }
    function showPreviousModal(currentId, prevId) {
        var currentModal = bootstrap.Modal.getInstance(document.getElementById(currentId));
        currentModal.hide();
        var prevModal = new bootstrap.Modal(document.getElementById(prevId));
        prevModal.show();
    }

    document.addEventListener('DOMContentLoaded', function () {
        var tooltipTriggerList = Array.prototype.slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
        tooltipTriggerList.forEach(function (tooltipTriggerEl) {
            new bootstrap.Tooltip(tooltipTriggerEl);
        });
    });
</script>

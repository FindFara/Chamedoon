@{
    Layout = null;
    var pageTitle = ViewData["Title"] as string ?? "Chamedoon";
}

<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>@pageTitle - چمدون</title>
    <link rel="icon" type="image/svg+xml" href="~/img/favicon.svg" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;500;600;700&display=swap" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous" />
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/site-dark.css" asp-append-version="true" />
    @RenderSection("Styles", required: false)
</head>
<body class="landing-page">
    <div class="d-flex flex-column min-vh-100">
        <header class="landing-header">
            <nav class="navbar navbar-expand-lg landing-navbar">
                <div class="container align-items-lg-center">
                    <a class="navbar-brand landing-logo" asp-controller="Home" asp-action="Index">
                        <span class="logo-mark" aria-hidden="true">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" width="26" height="26" fill="none">
                                <rect x="7" y="9" width="18" height="16" rx="4" stroke="currentColor" stroke-width="1.8" />
                                <path d="M12 9V7a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v2" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" />
                                <path d="M11 15h10" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" />
                            </svg>
                        </span>
                        <span class="logo-text">
                            <span class="logo-text-en">CHAMEDOON</span>
                            <span class="logo-text-fa">چمدون</span>
                        </span>
                    </a>
                    <div class="landing-center">
                        <div class="collapse navbar-collapse" id="landingNav">
                            <ul class="navbar-nav landing-nav mb-3 mb-lg-0 align-items-lg-center gap-3 gap-lg-4">
                                <li class="nav-item"><a class="nav-link" asp-controller="Immigration" asp-action="Index">شروع ارزیابی مهاجرت</a></li>
                                <li class="nav-item"><a class="nav-link" asp-controller="Home" asp-action="About">درباره ما</a></li>
                                <li class="nav-item"><a class="nav-link" asp-controller="Blog" asp-action="Index">وبلاگ</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="landing-controls">
                        <div class="landing-actions">
                            <div class="dropdown user-menu-dropdown">
                                <button class="icon-button dropdown-toggle user-menu-toggle" type="button" id="userMenuToggle" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="حساب کاربری" title="حساب کاربری">
                                    <span class="visually-hidden">حساب کاربری</span>
                                    @await Component.InvokeAsync("UserProfileImage", new { viewName = "Badge" })
                                    <span class="user-menu-icon" aria-hidden="true">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="22" height="22" fill="none">
                                            <path d="M12 12c2.8 0 5-2.2 5-5s-2.2-5-5-5-5 2.2-5 5 2.2 5 5 5Z" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" />
                                            <path d="M5.5 20.5c0-3.6 2.9-6.5 6.5-6.5s6.5 2.9 6.5 6.5" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" />
                                        </svg>
                                    </span>
                                </button>
                                <ul class="dropdown-menu dropdown-menu-end user-menu" aria-labelledby="userMenuToggle">
                                    @if (User.Identity.IsAuthenticated)
                                    {
                                        if (User.IsInRole("Admin"))
                                        {
                                            <li>
                                                <a class="dropdown-item" asp-area="Admin" asp-controller="Dashboard" asp-action="Index">پنل مدیریت</a>
                                            </li>
                                            <li><hr class="dropdown-divider" /></li>
                                        }
                                        <li>
                                            <a class="dropdown-item" asp-controller="UserPanel" asp-action="Index">پنل کاربری</a>
                                        </li>
                                        <li>
                                            <a class="dropdown-item text-danger" asp-controller="Account" asp-action="Logout">خروج</a>
                                        </li>
                                    }
                                    else
                                    {
                                        <li>
                                            <a class="dropdown-item" asp-controller="Account" asp-action="Login">ورود</a>
                                        </li>
                                        <li>
                                            <a class="dropdown-item" asp-controller="Account" asp-action="Register">ثبت‌نام</a>
                                        </li>
                                    }
                                </ul>
                            </div>
                        <button class="icon-button theme-toggle" type="button" id="darkModeToggle" data-mode="light" aria-pressed="false" aria-label="حالت شب" data-label="حالت شب" data-label-light="حالت شب" data-label-dark="حالت روز" title="حالت شب">
                            <span class="visually-hidden" data-role="label">حالت شب</span>
                            <span class="theme-toggle-icon" aria-hidden="true">
                                <svg class="icon-moon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="22" height="22" fill="none">
                                        <path d="M21 12.79A9 9 0 1 1 11.21 3 6.5 6.5 0 0 0 21 12.79Z" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" />
                                        <path d="M17.5 4.5 16 6m0-2 1.5 1.5" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" />
                                    </svg>
                                    <svg class="icon-sun" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="22" height="22" fill="none">
                                        <circle cx="12" cy="12" r="4" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" />
                                        <path d="M12 2v2M12 20v2M4.93 4.93l1.42 1.42M17.65 17.65l1.42 1.42M2 12h2M20 12h2M4.93 19.07l1.42-1.42M17.65 6.35l1.42-1.42" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" />
                                    </svg>
                                </span>
                            </button>
                        </div>
                        <button class="navbar-toggler d-lg-none mobile-menu-trigger" type="button" id="mobileMenuToggle" aria-controls="mobileMenu" aria-expanded="false" aria-label="باز کردن منو">
                            <span class="navbar-toggler-icon"></span>
                        </button>
                    </div>
                </div>

            </nav>
        </header>

        <div class="mobile-menu-backdrop" id="mobileMenuBackdrop"></div>
        <aside class="mobile-menu" id="mobileMenu" aria-hidden="true">
            <div class="mobile-menu-header">
                <a class="navbar-brand landing-logo" asp-controller="Home" asp-action="Index">
                    <span class="logo-mark" aria-hidden="true">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" width="26" height="26" fill="none">
                            <rect x="7" y="9" width="18" height="16" rx="4" stroke="currentColor" stroke-width="1.8" />
                            <path d="M12 9V7a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v2" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" />
                            <path d="M11 15h10" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" />
                        </svg>
                    </span>
                    <span class="logo-text">
                        <span class="logo-text-en">CHAMEDOON</span>
                        <span class="logo-text-fa">چمدون</span>
                    </span>
                </a>
                <button type="button" class="icon-button mobile-menu-close" id="mobileMenuClose" aria-label="بستن منو">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20" fill="none">
                        <path d="m8 8 8 8m0-8-8 8" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" />
                    </svg>
                </button>
            </div>
            <div class="mobile-menu-user">
                <div class="user-summary">
                    <div class="user-avatar-thumb">
                        @await Component.InvokeAsync("UserProfileImage", new { viewName = "Badge" })
                    </div>
                    <div>
                        @if (User.Identity.IsAuthenticated)
                        {
                            <p class="user-name mb-1">@User.Identity.Name</p>
                            <p class="text-muted mb-0 small">حساب کاربری فعال</p>
                        }
                        else
                        {
                            <p class="user-name mb-1">کاربر مهمان</p>
                            <p class="text-muted mb-0 small">برای تجربه کامل وارد شوید</p>
                        }
                    </div>
                </div>
                <div class="user-actions">
                    @if (User.Identity.IsAuthenticated)
                    {
                        <a class="btn-glass-primary btn-sm" asp-controller="UserPanel" asp-action="Index">پنل کاربری</a>
                        <a class="btn-glass-primary btn-sm" asp-controller="Account" asp-action="Logout">خروج</a>
                    }
                    else
                    {
                        <a class="btn btn-sm btn-primary" asp-controller="Account" asp-action="Login">ورود</a>
                        <a class="btn btn-sm btn-outline-primary" asp-controller="Account" asp-action="Register">ثبت‌نام</a>
                    }
                </div>
            </div>
            <nav class="mobile-menu-nav">
                <a class="mobile-menu-link" asp-controller="Immigration" asp-action="Index">شروع ارزیابی مهاجرت</a>
                <a class="mobile-menu-link" asp-controller="Home" asp-action="About">درباره ما</a>
                <a class="mobile-menu-link" asp-controller="Blog" asp-action="Index">وبلاگ</a>
            </nav>
        </aside>

        <main class="flex-grow-1">
            @RenderBody()
        </main>

        <footer class="landing-footer py-5">
            <div class="container">
                <div class="row gy-4">
                    <div class="col-md-4">
                        <a class="navbar-brand fw-bold mb-3 d-inline-block" asp-controller="Home" asp-action="Index">چمدون</a>
                        <p class="text-muted">راهنمای هوشمند تو برای انتخاب مقصد، آماده‌سازی مدارک و شروع زندگی جدید.</p>
                    </div>
                    <div class="col-md-4">
                        <h6 class="fw-semibold mb-3">بخش‌ها</h6>
                        <ul class="list-unstyled text-muted">
                            <li><a class="text-reset text-decoration-none" asp-controller="Home" asp-action="Index">خانه کلاسیک</a></li>
                            <li><a class="text-reset text-decoration-none" asp-controller="Home" asp-action="About">درباره چمدون</a></li>
                            <li><a class="text-reset text-decoration-none" asp-controller="Immigration" asp-action="Index">ارزیابی مهاجرت</a></li>
                            <li><a class="text-reset text-decoration-none" asp-controller="Blog" asp-action="Index">مطالب وبلاگ</a></li>
                        </ul>
                    </div>
                    <div class="col-md-4">
                        <h6 class="fw-semibold mb-3">خبرنامه</h6>
                        <p class="text-muted">برای دریافت تازه‌ترین نکات و تجربه‌های کاربران ثبت‌نام کن.</p>
                        <form class="row g-2 align-items-stretch newsletter-form" method="post" action="#">
                            <div class="col-12 col-sm">
                                <label class="visually-hidden" for="landingEmail">ایمیل</label>
                                <input id="landingEmail" type="email" class="form-control" placeholder="آدرس ایمیل" required />
                            </div>
                            <div class="col-12 col-sm-auto">
                                <button type="submit" class="btn-glass-primary newsletter-submit w-100 h-100">ثبت</button>
                            </div>
                        </form>
                    </div>
                </div>
                <div class="d-flex flex-column flex-md-row justify-content-between align-items-center mt-4 pt-4 border-top gap-3">
                    <p class="mb-0 text-muted">© @DateTime.UtcNow.Year چمدون. همه حقوق محفوظ است.</p>
                    <div class="d-flex gap-3">
                        <a class="text-decoration-none text-muted" href="#">حریم خصوصی</a>
                        <a class="text-decoration-none text-muted" href="#">قوانین</a>
                        <a class="text-decoration-none text-muted" href="#">پشتیبانی</a>
                    </div>
                </div>
            </div>
        </footer>
    </div>

    <a id="backToTop" class="btn-glass-primary btn-icon btn-lg back-to-top" href="#" aria-label="بازگشت به بالا">
        ↑
    </a>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>
    @RenderSection("Scripts", required: false)
</body>
</html>

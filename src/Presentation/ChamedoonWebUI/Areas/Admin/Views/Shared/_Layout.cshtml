@{
    Layout = null;
    var pageTitle = ViewData["Title"] as string ?? "Ù…Ø¯ÛŒØ±ÛŒØª Ú†Ù…Ø¯ÙˆÙ†";
}
<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>@pageTitle</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous" />
    <link rel="stylesheet" href="~/css/admin.css" asp-append-version="true" />
</head>
<body class="admin-shell">
    <div class="admin-wrapper d-flex">
        <aside class="admin-sidebar">
            <div class="sidebar-header">
                <a asp-area="Admin" asp-controller="Dashboard" asp-action="Index" class="sidebar-brand">Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª</a>
            </div>
            <nav class="sidebar-nav nav flex-column">
                <a class="nav-link" asp-area="Admin" asp-controller="Dashboard" asp-action="Index">
                    <span class="nav-icon" aria-hidden="true">ğŸ“Š</span>
                    Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯
                </a>
                <a class="nav-link" asp-area="Admin" asp-controller="Users" asp-action="Index">
                    <span class="nav-icon" aria-hidden="true">ğŸ‘¥</span>
                    Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ø§Ø±Ø¨Ø±Ø§Ù†
                </a>
                <a class="nav-link" asp-area="Admin" asp-controller="Blogs" asp-action="Index">
                    <span class="nav-icon" aria-hidden="true">ğŸ“</span>
                    Ù…Ø¯ÛŒØ±ÛŒØª ÙˆØ¨Ù„Ø§Ú¯
                </a>
                <a class="nav-link" asp-area="Admin" asp-controller="Roles" asp-action="Index">
                    <span class="nav-icon" aria-hidden="true">ğŸ›¡ï¸</span>
                    Ù†Ù‚Ø´â€ŒÙ‡Ø§ Ùˆ Ù…Ø¬ÙˆØ²Ù‡Ø§
                </a>
                <a class="nav-link" asp-area="" asp-controller="Home" asp-action="Index">
                    <span class="nav-icon" aria-hidden="true">ğŸ </span>
                    Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ø³Ø§ÛŒØª
                </a>
            </nav>
        </aside>
        <div class="admin-content flex-grow-1">
            <header class="admin-header d-flex justify-content-between align-items-center">
                <div class="d-flex align-items-center gap-3">
                    <button class="btn btn-outline-secondary d-md-none" type="button" id="sidebarToggle" aria-label="Ø¨Ø§Ø² Ùˆ Ø¨Ø³ØªÙ‡ Ú©Ø±Ø¯Ù† Ù…Ù†Ùˆ">
                        â˜°
                    </button>
                    <h1 class="h5 mb-0">@pageTitle</h1>
                </div>
                <div class="d-flex align-items-center gap-2">
                    <button class="btn btn-light" id="themeToggle" type="button" aria-pressed="false" aria-label="ØªØºÛŒÛŒØ± ØªÙ…">
                        <span class="theme-label">Ø­Ø§Ù„Øª Ø´Ø¨</span>
                    </button>
                </div>
            </header>
            <main class="admin-main">
                @if (TempData["Success"] is string successMessage)
                {
                    <div class="alert alert-success alert-dismissible fade show" role="alert">
                        @successMessage
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Ø¨Ø³ØªÙ†"></button>
                    </div>
                }
                @if (!ViewData.ModelState.IsValid)
                {
                    <div class="alert alert-danger" role="alert">
                        Ù„Ø·ÙØ§Ù‹ Ø®Ø·Ø§Ù‡Ø§ÛŒ ÙØ±Ù… Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯.
                    </div>
                }
                @RenderBody()
            </main>
            <footer class="admin-footer text-muted">
                Â© @DateTime.UtcNow.Year Ú†Ù…Ø¯ÙˆÙ† - Ù…Ø­ÛŒØ· Ù…Ø¯ÛŒØ±ÛŒØª
            </footer>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script>
        (function () {
            const storageKey = 'admin-theme';
            const body = document.body;
            const toggle = document.getElementById('themeToggle');
            const sidebar = document.querySelector('.admin-sidebar');
            const sidebarToggle = document.getElementById('sidebarToggle');

            const applyTheme = (theme) => {
                const isDark = theme === 'dark';
                body.classList.toggle('dark-mode', isDark);
                toggle?.setAttribute('aria-pressed', isDark ? 'true' : 'false');
                const label = toggle?.querySelector('.theme-label');
                if (label) {
                    label.textContent = isDark ? 'Ø­Ø§Ù„Øª Ø±ÙˆØ²' : 'Ø­Ø§Ù„Øª Ø´Ø¨';
                }
            };

            const storedTheme = localStorage.getItem(storageKey) ?? 'light';
            applyTheme(storedTheme);

            toggle?.addEventListener('click', () => {
                const nextTheme = body.classList.contains('dark-mode') ? 'light' : 'dark';
                localStorage.setItem(storageKey, nextTheme);
                applyTheme(nextTheme);
            });

            sidebarToggle?.addEventListener('click', () => {
                sidebar?.classList.toggle('sidebar-open');
                body.classList.toggle('sidebar-open');
            });
        })();
    </script>
    @RenderSection("Scripts", required: false)
</body>
</html>
